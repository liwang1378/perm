CREATE DATABASE IF NOT EXISTS framework DEFAULT CHARSET utf8 COLLATE utf8_general_ci;
USE framework;

DROP TABLE IF EXISTS t01_sys_user;
CREATE TABLE T01_SYS_USER(
	id INT PRIMARY KEY AUTO_INCREMENT COMMENT 'id',
	username VARCHAR(20) NOT NULL,
	nickname VARCHAR(20) NOT NULL,
	PASSWORD VARCHAR(50) NOT NULL,
	salt VARCHAR(20) NOT NULL,
	pids VARCHAR(25) COMMENT '上级领导 以,分隔',
	dept_id INT COMMENT '所属部门-外键',
	STATUS INT DEFAULT 0 COMMENT '状态 0 未激活 1 正常 2 锁定',
	add_by VARCHAR(25) DEFAULT 'sys',
	update_by VARCHAR(25) DEFAULT 'sys',
	add_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间' ,
	update_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP	
)ENGINE=INNODB DEFAULT CHARSET=utf8;

DROP TABLE IF EXISTS T02_SYS_ROLE;
CREATE TABLE T02_SYS_ROLE(
	id INT PRIMARY KEY AUTO_INCREMENT,
	NAME VARCHAR(20) NOT NULL,
	TYPE INT COMMENT '角色类型，1：基础员工（可查看自己名下数据），2：经理（可查看本组织内人员数据），3：管理员（可查看所有数据）',
	STATUS INT DEFAULT 0 COMMENT '状态 0 未激活 1 正常 3 锁定',
	add_by VARCHAR(25) DEFAULT 'sys',
	update_by VARCHAR(25) DEFAULT 'sys',
	add_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间' ,
	update_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '更新时间' 
)ENGINE=INNODB DEFAULT CHARSET=utf8;

DROP TABLE IF EXISTS T03_SYS_RESOURCE;
CREATE TABLE T03_SYS_RESOURCE(
	id INT PRIMARY KEY AUTO_INCREMENT,
	NAME VARCHAR(20) NOT NULL,
	pid INT DEFAULT 0 COMMENT '父结点id',
	pids VARCHAR(20) DEFAULT '' COMMENT '父结点id列表串',
	TYPE INT DEFAULT 0 COMMENT '资源类型 0 菜单 1 按钮 2 接口',
	url VARCHAR(50) NOT NULL COMMENT '访问地址',
	perm_code VARCHAR(25) NOT NULL COMMENT '权限代码字符串',
	color VARCHAR(20) COMMENT '颜色',
	icon VARCHAR(20) COMMENT '图标',
	sort INT DEFAULT 0 COMMENT '排序',
	STATUS INT DEFAULT 0 COMMENT '状态 0 未激活 1 正常 3 锁定',
	add_by VARCHAR(25) DEFAULT 'sys',
	update_by VARCHAR(25) DEFAULT 'sys',
	add_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间' ,
	update_time  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '更新时间' 
)ENGINE=INNODB DEFAULT CHARSET=utf8;

DROP TABLE IF EXISTS T04_SYS_USER_ROLE;
CREATE TABLE T04_SYS_USER_ROLE(
	id INT PRIMARY KEY AUTO_INCREMENT,
	user_id INT NOT NULL,
	role_id INT NOT NULL,
	add_by VARCHAR(25) DEFAULT 'sys',
	update_by VARCHAR(25) DEFAULT 'sys',
	add_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间' ,
	update_time  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '更新时间' 
)ENGINE=INNODB DEFAULT CHARSET=utf8;

DROP TABLE IF EXISTS T05_SYS_ROLE_RESOURCE;
CREATE TABLE T05_SYS_ROLE_RESOURCE(
	id INT PRIMARY KEY AUTO_INCREMENT,
	role_id INT NOT NULL,
	res_id INT NOT NULL,
	add_by VARCHAR(25) DEFAULT 'sys',
	update_by VARCHAR(25) DEFAULT 'sys',
	add_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间' ,
	update_time  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '更新时间' 
)ENGINE=INNODB DEFAULT CHARSET=utf8;

DROP TABLE IF EXISTS T00_SYS_LOG;
CREATE TABLE T00_SYS_LOG(
	id INT PRIMARY KEY AUTO_INCREMENT,
	username VARCHAR(20) NOT NULL,
	user_id VARCHAR(20) NOT NULL,
	ip VARCHAR(20) NOT NULL,
	ajax INT,
	uri VARCHAR(50) NOT NULL,
	params TEXT,
	http_method VARCHAR(20) NOT NULL,
	class_method VARCHAR(100) NOT NULL,
	response TEXT COMMENT '响应内容',
	action_name VARCHAR(100) NOT NULL COMMENT '具体操作内容',
	add_by VARCHAR(25) DEFAULT 'sys',
	update_by VARCHAR(25) DEFAULT 'sys',
	add_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间' ,
	update_time  TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '更新时间' 
)ENGINE=INNODB DEFAULT CHARSET=utf8;
